#include <gtest/gtest.h>

#include <sudoku-solver.h>
#include<SudokuValidator.h>

/*
This testsuite is designed to test the entire solution. I am running a known input and output through several times
*/

class DontSolveManyTest : public testing::TestWithParam<std::array<std::array<char,9>,9>>
{
    // You can implement all the usual fixture class members here.
    // To access the test parameter, call GetParam() from class
    // TestWithParam<T>.
};

TEST_P(DontSolveManyTest, testSolution)
{
    // Inside a test, access the test parameter with the GetParam() method
    // of the TestWithParam<T> class:
    auto board = GetParam();
    Solution s;
    s.solveSudoku(board);
    EXPECT_FALSE(SudokuValidator::isSudokuValid(board));
}

std::array<std::array<char,9>,9> twoOnesInBlockA =
{   {{'1', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '1', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'}} };

std::array<std::array<char,9>,9> twoOnesInBlockB =
{ {{'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '1', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '1', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'}} };

std::array<std::array<char,9>,9> twoOnesInBlockC =
{   {{'.', '.', '.', '.', '.', '.', '.', '1', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '1'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'}} };

std::array<std::array<char,9>,9> twoOnesInBlockD =
{   {{'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'1', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '1', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'}} };

std::array<std::array<char,9>,9> twoOnesInBlockE =
{   {{'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '1', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '1', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'}} };

std::array<std::array<char,9>,9> twoOnesInBlockF =
{   {{'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '1', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '1', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'}} };

std::array<std::array<char,9>,9> twoOnesInBlockG =
{   {{'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '1', '.', '.', '.', '.', '.', '.', '.'},
     {'1', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'}} };

std::array<std::array<char,9>,9> twoOnesInBlockH =
{   {{'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '1', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '1', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'}}};

std::array<std::array<char,9>,9> twoOnesInBlockI =
{   {{'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '1', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '1', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'}} };

std::array<std::array<char,9>,9> twoOnesInRowA =
{   {{'1', '.', '.', '.', '1', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'}} };

std::array<std::array<char,9>,9> twoOnesInRowB =
{   {{'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '1', '.', '.', '.', '.', '.', '1', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'}} };

std::array<std::array<char,9>,9> twoOnesInRowC =
{   {{'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '1', '.', '.', '.', '.', '1', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'}} };

std::array<std::array<char,9>,9> twoOnesInRowD =
{   {{'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '1', '.', '.', '.', '.', '.', '1', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'}} };

std::array<std::array<char,9>,9> twoOnesInRowE =
{   {{'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '1', '.', '.', '.', '1', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'}} };

std::array<std::array<char,9>,9> twoOnesInRowF =
{   {{'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '1', '.', '.', '.', '.', '1', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'}} };

std::array<std::array<char,9>,9> twoOnesInRowG =
{   {{'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '1', '.', '.', '.', '.', '.', '1'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'}} };

std::array<std::array<char,9>,9> twoOnesInRowH =
{   {{'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'1', '.', '.', '.', '.', '.', '.', '1', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'}} };

std::array<std::array<char,9>,9> twoOnesInRowI =
{   {{'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'.', '.', '.', '.', '.', '.', '.', '.', '.'},
     {'1', '.', '.', '.', '.', '1', '.', '.', '.'}} };

INSTANTIATE_TEST_SUITE_P(DontSolveManyTestSuite,
                         DontSolveManyTest,
                         testing::Values(
                             twoOnesInBlockA,
                             twoOnesInBlockB,
                             twoOnesInBlockC,
                             twoOnesInBlockD,
                             twoOnesInBlockE,
                             twoOnesInBlockF,
                             twoOnesInBlockG,
                             twoOnesInBlockH,
                             twoOnesInBlockI,

                             twoOnesInRowA,
                             twoOnesInRowB,
                             twoOnesInRowC,
                             twoOnesInRowD,
                             twoOnesInRowE,
                             twoOnesInRowF,
                             twoOnesInRowG,
                             twoOnesInRowH,
                             twoOnesInRowI));